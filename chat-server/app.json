{
  "name": "ProCV Chat Server",
  "description": "Real-time WebSocket chat server for ProCV property platform",
  "repository": "https://github.com/your-username/procv-chat-server",
  "logo": "https://procv.cv/logo.png",
  "keywords": ["nodejs", "websocket", "chat", "real-estate", "socket.io"],
  "success_url": "/health",
  "stack": "heroku-22",
  "buildpacks": [
    {
      "url": "heroku/nodejs"
    }
  ],
  "formation": {
    "web": {
      "quantity": 1,
      "size": "basic"
    }
  },
  "addons": [
    {
      "plan": "heroku-postgresql:essential-0",
      "as": "DATABASE"
    },
    {
      "plan": "heroku-redis:mini",
      "as": "REDIS"
    },
    {
      "plan": "papertrail:choklad",
      "as": "LOGGING"
    }
  ],
  "env": {
    "NODE_ENV": {
      "description": "Node.js environment",
      "value": "production"
    },
    "JWT_SECRET": {
      "description": "Secret key for JWT token generation",
      "generator": "secret"
    },
    "JWT_EXPIRES_IN": {
      "description": "JWT token expiration time",
      "value": "24h"
    },
    "CORS_ORIGIN": {
      "description": "Allowed CORS origins",
      "value": "https://same-t08mrgjy1io-latest.netlify.app,https://procv.cv"
    },
    "FILE_UPLOAD_MAX_SIZE": {
      "description": "Maximum file upload size in bytes",
      "value": "10485760"
    },
    "FILE_UPLOAD_ALLOWED_TYPES": {
      "description": "Allowed file types for uploads",
      "value": "image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain"
    },
    "WS_HEARTBEAT_INTERVAL": {
      "description": "WebSocket heartbeat interval in milliseconds",
      "value": "30000"
    },
    "WS_CONNECTION_TIMEOUT": {
      "description": "WebSocket connection timeout in milliseconds",
      "value": "60000"
    },
    "WS_MAX_CONNECTIONS_PER_USER": {
      "description": "Maximum WebSocket connections per user",
      "value": "5"
    },
    "RATE_LIMIT_WINDOW_MS": {
      "description": "Rate limiting window in milliseconds",
      "value": "900000"
    },
    "RATE_LIMIT_MAX_REQUESTS": {
      "description": "Maximum requests per rate limit window",
      "value": "100"
    },
    "ENABLE_ANALYTICS": {
      "description": "Enable analytics tracking",
      "value": "true"
    },
    "LOG_LEVEL": {
      "description": "Logging level",
      "value": "info"
    }
  },
  "scripts": {
    "postdeploy": "npm run migrate && npm run seed"
  },
  "environments": {
    "review": {
      "addons": [
        {
          "plan": "heroku-postgresql:essential-0"
        },
        {
          "plan": "heroku-redis:mini"
        }
      ],
      "scripts": {
        "postdeploy": "npm run migrate"
      }
    },
    "staging": {
      "addons": [
        {
          "plan": "heroku-postgresql:standard-0"
        },
        {
          "plan": "heroku-redis:premium-0"
        }
      ]
    }
  }
}
